<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulario de Mecánica</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
        }

        .entry {
            border: 1px solid #ccc;
            padding: 10px;
            margin-bottom: 10px;
        }
    </style>
</head>
<body>

    <h1>Formulario de Mecánica</h1>

    <form id="mecanicaForm">
        <label for="nombre">Nombre:</label>
        <input type="text" id="nombre" name="nombre" required>

        <label for="vehiculo">Vehículo:</label>
        <input type="text" id="vehiculo" name="vehiculo" required>

        <label for="problema">Problema:</label>
        <textarea id="problema" name="problema" rows="4" required></textarea>

        <button type="button" onclick="crearRegistro()">Crear</button>
    </form>

    <div id="registros">
        <!-- Aquí se mostrarán los registros -->
    </div>

    <script>
        function crearRegistro() {
            // Obtener los valores del formulario
            var nombre = document.getElementById('nombre').value;
            var vehiculo = document.getElementById('vehiculo').value;
            var problema = document.getElementById('problema').value;

            // Crear un nuevo registro
            var nuevoRegistro = {
                nombre: nombre,
                vehiculo: vehiculo,
                problema: problema
            };

            // Mostrar el nuevo registro en la página
            mostrarRegistro(nuevoRegistro);

            // Puedes agregar aquí la lógica para enviar estos datos a Firebase
        }

        function mostrarRegistro(registro) {
            var registrosDiv = document.getElementById('registros');

            // Crear un elemento div para mostrar el registro
            var entryDiv = document.createElement('div');
            entryDiv.className = 'entry';
            entryDiv.innerHTML = `
                <h2>${registro.nombre}</h2>
                <p><strong>Vehículo:</strong> ${registro.vehiculo}</p>
                <p><strong>Problema:</strong> ${registro.problema}</p>
                <button onclick="eliminarRegistro(this)">Eliminar</button>
                <button onclick="editarRegistro(this)">Editar</button>
            `;

            // Agregar el nuevo elemento al contenedor de registros
            registrosDiv.appendChild(entryDiv);

            // Limpiar el formulario después de agregar un registro
            document.getElementById('mecanicaForm').reset();
        }

        function eliminarRegistro(elemento) {
            // Obtener el elemento padre (div.entry) del botón clicado
            var entryDiv = elemento.closest('.entry');

            // Eliminar el registro de la página
            entryDiv.remove();

            // Puedes agregar aquí la lógica para eliminar este registro de Firebase
        }

        function editarRegistro(elemento) {
            // Obtener el elemento padre (div.entry) del botón clicado
            var entryDiv = elemento.closest('.entry');

            // Obtener los elementos del registro
            var nombre = entryDiv.querySelector('h2').innerText;
            var vehiculo = entryDiv.querySelector('p:nth-child(2)').innerText.split(": ")[1];
            var problema = entryDiv.querySelector('p:nth-child(3)').innerText.split(": ")[1];

            // Rellenar el formulario con los datos actuales
            document.getElementById('nombre').value = nombre;
            document.getElementById('vehiculo').value = vehiculo;
            document.getElementById('problema').value = problema;

            // Eliminar el registro de la página
            entryDiv.remove();

            // Puedes agregar aquí la lógica para editar este registro en Firebase
        }
    </script>

        <script type="module">
                // Import the functions you need from the SDKs you need
                import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.0/firebase-app.js";
                import { getDatabase, ret, push, onValue, reove } from "https://www.gstatic.com/firebasejs/10.7.0/firebase-database.js";
                // TODO: Add SDKs for Firebase products that you want to use
                // https://firebase.google.com/docs/web/setup#available-libraries
            
                // Your web app's Firebase configuration
                const firebaseConfig = {
                apiKey: "AIzaSyCnkqE8eO4bQ6rqTQD_vbCFmHfE2UNu60o",
                authDomain: "conexion-43260.firebaseapp.com",
                projectId: "conexion-43260",
                storageBucket: "conexion-43260.appspot.com",
                messagingSenderId: "134709617383",
                appId: "1:134709617383:web:b9e4937b41ee963f883842"
                };
            
                // Initialize Firebase
                const app = initializeApp(firebaseConfig);
                const database = getDatabase(app);

        window.crearRegistro = function () {
                const nombre = document.getElementById("nombre").value;
                const edad = document.getElementById("edad").value;
                console.log(nombre, edad);
                
                push(
                    ref(database, 'septimo'),
                    {
                        name: nombre,
                        age: edad 
                    }
                );

        }
      </script>

</body>
</html>

