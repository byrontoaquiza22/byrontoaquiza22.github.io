<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulario de Mecánica</title>
    <script src="https://www.gstatic.com/firebasejs/9.6.6/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.6/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.6/firebase-database.js"></script>


    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
        }

        #registros {
            margin-top: 20px;
        }

        .registro {
            border: 1px solid #ccc;
            padding: 10px;
            margin-bottom: 10px;
        }
    </style>
</head>
<body>

    <h1>Formulario de Mecánica</h1>

    <form id="mecanicaForm">
        <label for="nombre">Nombre:</label>
        <input type="text" id="nombre" name="nombre" required>

        <label for="vehiculo">Vehículo:</label>
        <input type="text" id="vehiculo" name="vehiculo" required>

        <label for="problema">Problema:</label>
        <textarea id="problema" name="problema" rows="4" required></textarea>

        <button type="button" onclick="crearRegistro()">Crear</button>
        <button type="button" onclick="limpiarFormulario()">Limpiar</button>
    </form>

    <div id="registros">
        <!-- Aquí se mostrarán los registros -->
    </div>

    <script>
        function crearRegistro() {
        var nombre = document.getElementById('nombre').value;
        var vehiculo = document.getElementById('vehiculo').value;
        var problema = document.getElementById('problema').value;

        if (nombre && vehiculo && problema) {
            var registro = {
                nombre: nombre,
                vehiculo: vehiculo,
                problema: problema
            };

            // Obtén una referencia a la base de datos de Firebase
            var database = firebase.database();
            var registrosRef = database.ref('registros');

            // Guarda el nuevo registro en la base de datos
            registrosRef.push(registro);

            limpiarFormulario();
        } else {
            alert("Por favor, completa todos los campos antes de crear un registro.");
        }
    }


        function mostrarRegistro(registro) {
            var registrosDiv = document.getElementById('registros');

            var registroDiv = document.createElement('div');
            registroDiv.className = 'registro';
            registroDiv.innerHTML = `
                <h2>${registro.nombre}</h2>
                <p><strong>Vehículo:</strong> ${registro.vehiculo}</p>
                <p><strong>Problema:</strong> ${registro.problema}</p>
                <button onclick="editarRegistro(this)">Editar</button>
                <button onclick="eliminarRegistro(this)">Eliminar</button>
            `;

            registrosDiv.appendChild(registroDiv);
        }

        function editarRegistro(botonEditar) {
            var registroDiv = botonEditar.closest('.registro');
            var nombre = registroDiv.querySelector('h2').innerText;
            var vehiculo = registroDiv.querySelector('p:nth-child(2)').innerText.split(": ")[1];
            var problema = registroDiv.querySelector('p:nth-child(3)').innerText.split(": ")[1];

            document.getElementById('nombre').value = nombre;
            document.getElementById('vehiculo').value = vehiculo;
            document.getElementById('problema').value = problema;

            registroDiv.remove();
        }

        function eliminarRegistro(botonEliminar) {
            var registroDiv = botonEliminar.closest('.registro');
            registroDiv.remove();
        }

        function limpiarFormulario() {
            document.getElementById('nombre').value = '';
            document.getElementById('vehiculo').value = '';
            document.getElementById('problema').value = '';
        }
    </script>

        <script type="module">
                // Import the functions you need from the SDKs you need
                import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.0/firebase-app.js";
                import { getDatabase, ret, push, onValue, reove } from "https://www.gstatic.com/firebasejs/10.7.0/firebase-database.js";
                // TODO: Add SDKs for Firebase products that you want to use
                // https://firebase.google.com/docs/web/setup#available-libraries
            
                // Your web app's Firebase configuration
                const firebaseConfig = {
                apiKey: "AIzaSyCnkqE8eO4bQ6rqTQD_vbCFmHfE2UNu60o",
                authDomain: "conexion-43260.firebaseapp.com",
                projectId: "conexion-43260",
                storageBucket: "conexion-43260.appspot.com",
                messagingSenderId: "134709617383",
                appId: "1:134709617383:web:b9e4937b41ee963f883842"
                };
            
                // Initialize Firebase
                const app = initializeApp(firebaseConfig);
                const database = getDatabase(app);

        window.crearRegistro = function () {
                const nombre = document.getElementById("nombre").value;
                const edad = document.getElementById("edad").value;
                console.log(nombre, edad);
                
                push(
                    ref(database, 'septimo'),
                    {
                        name: nombre,
                        age: edad 
                    }
                );

        }
      </script>

</body>
</html>

